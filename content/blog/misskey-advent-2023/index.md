---
title: "Misskeyの鯖缶を始めて1年で起こったことや変化など"
description: "自鯖用意して障害対策してメイド服着てからが本番"
date: 2023-12-04T00:00:00+09:00
draft: false
tags: [blog, misskey]
categories: [blog]
---

{{< alert "circle-info" >}}
この記事は[Misskey Advent Calendar 2023](https://adventar.org/calendars/8742) 4日目の記事です。
{{< /alert >}}

## はじめに

はじめましての方ははじめまして、そうでない方はこんにちは。サンセット([@sunset@mi.sunset0916.net](https://mi.sunset0916.net/@sunset))です。

さんせすきーという小規模なMisskeyサーバーの管理者をやっている美少女 **[要出典]** です。

アドカレの前後の人がしっかり技術的なことを書きそうなので、今回Misskeyを始めてからなんやかんやあってほぼお一人様な小規模鯖の鯖缶を1年やってきた話を書こうと思います。

## Misskeyをはじめた

私がMisskeyを始めたのは2022年6月、[Submarin](https://submarin.online)というサーバーが立ち上がった少し後でした。  
以前運営者が同じ旧Submarin(チャットアプリ)にいたこともあり試しに登録。

そこからなんやかんやあってSubmarinに定住し、無事にMisskeyの廃人になることに。

Submarinを拠点にしていたことや、プログラミング、自宅鯖などに興味があったこともあり、先輩鯖缶など多くの技術者と交流を持つことができました。

これもしかして人生のターニングポイントってやつ？

## 鯖缶をはじめた

Misskey.ioが同接300人でお祭り騒ぎになる少し前、Submarinが **最大一週間程度™** のメンテナンスに入りました。(実際は2.5週間くらい)

Twitterが荒れたり不安定になったりなど様々な問題がありMisskeyに移住したのですが安定した居場所が消え去ってしまい、安定した居場所、自鯖の準備をすることに。

当時は急ぎで建てたのでそのへんにあったノートPCにDebianを入れて構築しました。  
確かv12.119.1だったかな。

転がってたノートPCという不安定な環境だったため招待や開放はせずにお一人様として運用していました。  
お一人様なのに何回かDB飛ばしかけたのは内緒。

## 正式に鯖缶と認められた(?)

2023年1月ごろ、サーバーを小型ベアボーンPCに置き換え、バックアップ先のNASを用意しUPSで停電対策をするなど、サーバーを安定して運用できる環境を整えました。  
過去に自宅鯖でHDDが故障して30万円弱お金が飛んだトラウマがあり結構慎重だったかも。

Misskeyもv13系にアップデートし、利用規約やテーマなども整備。  
仕上げにメイド服を着た女装自撮りを投稿することで無事に正式に鯖缶として認められることとなりました。~~(この文化何なの)~~

## 運用しているサーバーについて

鯖缶ってなんか大変そうとか思う人もいそうなので現在のうちの鯖のことを軽く書いておきます。  
大丈夫大丈夫、鯖缶こわくないから。

うちは基本的に信頼できるFFやリア友のみを招待で入れるスタンスなのでモデレーションはほぼしてません。  
鯖缶としてやることは基本的に障害対応とアップデートくらいです。  
基本的には停電が起きなければ怖いものはないですよ。

サーバーの構成としては、i5-6500/8GB/HDDな小型ベアボーンPCにDebianを入れたものをサーバー本体に、RAID1のNASにUPSを取り付けたものをバックアップ先にしています。  
外部への公開はCloudflare Tunnelを使用し、バックアップは毎日深夜にデータベースを、週に1回全体バックアップを取っています。  
費用については鯖本体に7000円、バックアップ先に70000円ほどかけました。([鯖の写真](https://mi.sunset0916.net/notes/9auihbpaqs))

DBが無事ならあとはなんとかなる。[村上さんもそう言ってた](https://blog.arkjp.net/2021/12/1003io/)のでバックアップはしっかりしますよ。

## 運用していて起きた変化など

同接1~3人程度の超小規模鯖を拠点にしたことで、必然的に他サーバーの人たちと交流することになり、様々なサーバーのユーザーや管理者と関わりを持つようになりました。

サーバー管理者が多いTLだとサーバー運用についての話題が上がることも多々あり、多くのことをTLから学ぶ日々を送っています。

小規模鯖、自鯖だとLTLで完結することがまずないため、TLに様々な情報を流すために積極的に他サーバーの人をフォローするようになるなどの変化もありました。

あと鯖缶繋がり？で知り合った**FFが私の通う専門学校の同じ学科に入学してきました**。  
そんなことある？？？？？？？？？？？？

## おわりに

今回はいろいろあって自鯖をやってる人の話でした。

周りの人との繋がりに感謝ですほんとに。  
鯖缶やってる人とか意外と相談に乗ったり助けてくれたりするので自鯖やりたいなって人はそういう人探して交流してみるといいかも？

来年のアドカレではプログラミングやってる人らしくプラグインとか外部ツールとか作りたいので、来年までにAiScriptとMisskeyAPI勉強してきます！

それでは、また次回。
